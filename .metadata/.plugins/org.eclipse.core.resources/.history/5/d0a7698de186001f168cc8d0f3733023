package com.web.spring.controller;

import java.util.List;
import java.util.Map;

import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.DeleteMapping;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.PutMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;
import com.web.spring.dto.Product;

@RestController
@RequestMapping("a1/api")
public class TestController {

	@GetMapping("/product")
	public String select(@RequestParam String num, @RequestParam String name) {
		return num + "의 물건의 이름은" + name;
	}
	//http://localhost:9999/a1/api/product?num=1234&name=사과
	@GetMapping("/product/{num}")
	public String getProduct(@PathVariable String num) {
		return "물건의 이름은" + num;

	}
	//http://localhost:9999/a1/api/product/num
	@PostMapping("/product")
	public String getProduct(@RequestBody List<Product> list) {
		Product vo1 = new Product(1234,"사과","종각에서 자란 사과"); 
		Product vo2 = new Product(2222,"키위","종각에서 자란 키위"); 
		Product vo3 = new Product(3333,"파인애플","종각에서 자란 파인애플"); 
		
		list.add(vo1);
		list.add(vo2);
		list.add(vo3);
		return list.toString();
	}
	//http://localhost:9999/a1/api/product
	
	@PostMapping("/product2")
	public String insertProduct(@RequestBody Product pvo) {
		Product nvo = new Product(1234,"사과","종각에서 자란 사과"); 
		
		pvo = nvo;
		System.out.println(pvo);
		return pvo.toString();
	}
	
	@PutMapping("/product")
	public ResponseEntity<?> updateProduct(@RequestBody Product pvo){
		/*
		 * 201.. create
		 * 200.. Success
		 * 202...Update
		 * 빌드 패턴....
		 * */
		
		return ResponseEntity
				.status(200)
				.body(pvo);
	}
	
	@DeleteMapping("/product/{no}")
	public ResponseEntity<?> deleteProduct(@RequestBody int no){
		
		return ResponseEntity
				.status(200)
				.body(no+"delete ok");
		
	}
	
	
}
